
<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>TeaCat: Go Coverage Report</title>
		<style>
			body {
				background: black;
				color: rgb(80, 80, 80);
			}
			body, pre, #legend span {
				font-family: Menlo, monospace;
				font-weight: bold;
			}
			#topbar {
				background: black;
				position: fixed;
				top: 0; left: 0; right: 0;
				height: 42px;
				border-bottom: 1px solid rgb(80, 80, 80);
			}
			#content {
				margin-top: 50px;
			}
			#nav, #legend {
				float: left;
				margin-left: 10px;
			}
			#legend {
				margin-top: 12px;
			}
			#nav {
				margin-top: 10px;
			}
			#legend span {
				margin: 0 5px;
			}
			.cov0 { color: rgb(192, 0, 0) }
.cov1 { color: rgb(128, 128, 128) }
.cov2 { color: rgb(116, 140, 131) }
.cov3 { color: rgb(104, 152, 134) }
.cov4 { color: rgb(92, 164, 137) }
.cov5 { color: rgb(80, 176, 140) }
.cov6 { color: rgb(68, 188, 143) }
.cov7 { color: rgb(56, 200, 146) }
.cov8 { color: rgb(44, 212, 149) }
.cov9 { color: rgb(32, 224, 152) }
.cov10 { color: rgb(20, 236, 155) }

		</style>
	</head>
	<body>
		<div id="topbar">
			<div id="nav">
				<select id="files">
				
				<option value="file0">TeaCat/main.go (50.6%)</option>
				
				</select>
			</div>
			<div id="legend">
				<span>not tracked</span>
			
				<span class="cov0">not covered</span>
				<span class="cov8">covered</span>
			
			</div>
		</div>
		<div id="content">
		
		<pre class="file" id="file0" style="display: none">package main

import (
        "bufio"
        "bytes"
        "flag"
        "fmt"
        "io"
        "io/ioutil"
        "os"
        "path/filepath"
        "unicode/utf8"
)

// FlagOptions is file options
type FlagOptions struct {
        printLines bool
        printBytes bool
        printWords bool
        printCharacters bool
        printHelp  bool
        printCat   bool
        printNum   bool
}

// Counter is counter of elements
type Counter struct {
        lines int
        words int
        bytes int
        characters int
}

func parseFlagOptions() FlagOptions <span class="cov8" title="1">{
        var opts FlagOptions
        flag.BoolVar(&amp;opts.printLines, "l", false, "print lines")
        flag.BoolVar(&amp;opts.printBytes, "b", false, "print bytes")
        flag.BoolVar(&amp;opts.printCharacters, "c", false, "print characters")
        flag.BoolVar(&amp;opts.printWords, "w", false, "print words")
        flag.BoolVar(&amp;opts.printHelp, "h", false, "print help")
        flag.BoolVar(&amp;opts.printCat, "p", false, "print all words")
        flag.BoolVar(&amp;opts.printNum, "lp", false, "print all words and line number")
        flag.Parse()

        if !opts.printLines &amp;&amp; !opts.printBytes &amp;&amp; !opts.printWords &amp;&amp; !opts.printCharacters</span><span class="cov8" title="1">{
                opts.printLines = true
                opts.printBytes = true
                opts.printWords = true
                opts.printCharacters = true
        }</span>

        <span class="cov8" title="1">return opts</span>
}

func (c *Counter) count(r io.Reader) (bool, error) {
        b, err := ioutil.ReadAll(r)
        if err != nil {
                return false,</span><span class="cov0" title="0"> err
        }
        c</span>.lines = bytes.Count(b, []byte{'\n'})
        <span class="cov8" title="1">c.bytes = len(b)
        c.words = len(bytes.Fields(b))
        return true, nil
}
</span>
func helpMessage(originalProgramName string) string {
        programName := filepath.Base(originalProgramName)
        return fmt.Sprintf(`%s [OPTIONS] &lt;FILEs...|DIRs...&gt;
        -b, --byte                  Prints the number of bytes in each input file.
        -c, --character             Prints the number of characters in each input file.
        -l, --line                  Prints the number of lines in each input file.
        -w, --word                  Prints the number of words in each input file.
        -p, --print                 Prints the all words in each input file.
        -lp,--lineprint             prints the all words and line number in each input file.
        -h, --help                  Prints this message.
ARGUMENTS
        FILEs...                    Specifies targets. TeaCat accepts zip/tar/tar.gz/ files.
        DIRs...                     Files in the given directory are as the input files.`, programName)
}

</span>// Show is output of elements
func (c Counter) show(opts FlagOptions, filename string) {
        fmt.Printf("File name is %s\n", filename)
        if opts.printLines {
                fmt.Printf("%7d li</span><span class="cov8" title="1">nes", c.lines)
        }
        i</span>f opts.printWords {
        <span class="cov8" title="1">        fmt.Printf("%7d wo</span><span class="cov8" title="1">rds", c.words)
        }
        i</span>f opts.printBytes {
        <span class="cov8" title="1">        fmt.Printf("%7d by</span><span class="cov8" title="1">tes", c.bytes)
        }
        i</span>f opts.printCharacters {
        <span class="cov8" title="1">        fmt.Printf("%7d chars",</span><span class="cov8" title="1"> c.characters)
        }
        f</span>mt.Println()
}<span class="cov8" title="1">
</span>
// Add is add of elements
func (c *Counter) add(src Counter) {
        c.lines += src.lines
        c.bytes += src.bytes
        c.words += src.words
}

</span>func filecat(opts FlagOptions) int{
        filenames := flag.Args()
        i := 1

        for _, filename := range filenames {
                fp, err := os.Open(filename)
</span>                if err != nil {
                        fmt.Println(e</span><span class="cov0" title="0">rr)
                        return 1
                } else {
                        </span>scann<span class="cov0" title="0">er := bufio.NewScanner(fp)
                        for ; scanner.Scan(); i++ {
                                if opts.printNum {
</span>                                        //„Ç™„Éó„Ç∑„Éß„É</span><span class="cov0" title="0">≥„Åå„ÅÇ„ÇãÂ†¥Âêà
                                        fmt.Printf("%v: ", i)
                                }
                                f</span>mt.Println(scanner.Text())
                        }<span class="cov0" title="0">
</span>                }
        }
        return 0
}<span class="cov0" title="0">
</span>
func goMain(args []string) int {
        opts := parseFlagOptions()
        filenames := flag.Args()

        var totalCount Counter

        if opts.printHelp {
                fmt.Println(helpM</span><span class="cov0" title="0">essage(filepath.Base(args[1])))
                return 0
        }

</span>        if len(filenames) == 0 {
        <span class="cov8" title="1">        var c Counter
</span>                _, err := c.count(os.Stdin)
                if err != nil {
                        fmt.Println(e</span><span class="cov0" title="0">rr)
                        return 1
                }
                c</span>.show(opts, "")
        }<span class="cov8" title="1">
</span>
        if opts.printCat || opts.printNum {
        <span class="cov8" title="1">        status := filecat(opts)
</span>                return status
        }

</span>        for _, filename := range filenames {
        <span class="cov8" title="1">        var c Counter
</span>                if opts.printCharacters {
                        data, _ := ioutil.ReadF</span><span class="cov0" title="0">ile(filename)
                        c.characters = utf8.RuneCountInString(string(data))
                }
                f</span>p, err := os.Open(filename)
                <span class="cov0" title="0">if err != nil {
                        fmt.Println(e</span><span class="cov0" title="0">rr)
                        continue
                }
</span>                _, err = c.count(fp)
                <span class="cov0" title="0">if err != nil {
                        fmt.Println(e</span><span class="cov0" title="0">rr)
                        continue
                }
</span>                totalCount.add(c)
                <span class="cov0" title="0">c.show(opts, filename)
                fp.Close()
        }
</span>
        if len(filenames) &gt; 1 {
        <span class="cov8" title="1">        totalCount.show(opts,</span><span class="cov0" title="0"> "total")
        }

</span>        return 0
}<span class="cov8" title="1">
</span>
func main() {
        status := g<span class="cov0" title="0">oMain(os.Args)
        os.Exit(status)
}
</pre>
		
		</div>
	</body>
	<script>
	(function() {
		var files = document.getElementById('files');
		var visible;
		files.addEventListener('change', onChange, false);
		function select(part) {
			if (visible)
				visible.style.display = 'none';
			visible = document.getElementById(part);
			if (!visible)
				return;
			files.value = part;
			visible.style.display = 'block';
			location.hash = part;
		}
		function onChange() {
			select(files.value);
			window.scrollTo(0, 0);
		}
		if (location.hash != "") {
			select(location.hash.substr(1));
		}
		if (!visible) {
			select("file0");
		}
	})();
	</script>
</html>
